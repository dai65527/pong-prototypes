<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Gamedev Canvas Workshop</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
        }

    </style>
</head>

<body>
    <canvas id="myCanvas" width="480" height="360"></canvas>
</body>

<script>
    const canvas = document.getElementById('myCanvas');

    // Create a new canvas context
    // 2D描画コンテキストを保存する
    // 2D描画コンテキストは実際にCanvasに描画するために使うツールとなる
    const ctx = canvas.getContext('2d');

    // ボールのの中心座標
    let x = canvas.width / 2;
    let y = canvas.height / 2;

    // ボールの半径
    const ballRadius = 10;

    // 1描画あたりの座標の変更幅
    let dx = 2;
    let dy = -2;

    // ボールの描画処理
    const drawBall = () => {
        ctx.beginPath();
        ctx.arc(x, y, ballRadius, 0, Math.PI*2);  // 座標(x,y)pxに円を描画
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();
    }

    // 描画処理
    const draw = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height); // キャンバスの内容を消去する
        drawBall(); // ボールを描画する

        // 壁にぶつかっていた場合はボールを反転する
        if (x + dx < ballRadius || x + dx > canvas.width - ballRadius)  {
            dx = -dx;
        }
        if (y + dy < ballRadius || y + dy >= canvas.height - ballRadius) {
            dy = -dy;
        }

        // ボールを移動する
        x += dx;
        y += dy;
    }

    // 10msごとに描画処理を行う
    setInterval(draw, 10);
</script>

</html>
